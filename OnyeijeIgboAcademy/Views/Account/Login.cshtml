@model OnyeijeIgboAcademy.ViewModel.LoginViewModel
@{
    Layout = null;
    var email = ViewBag.Email;
    var firstlogin = ViewBag.FirstLogin;
    var logout = ViewBag.logout;
}

<!------ Include the above in your HEAD tag ---------->

<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
    <!--Made with love by Mutiullah Samim -->
    <!--Bootsrap 4 CDN-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!--Fontawesome CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link href="~/assets/vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />
    <script src="~/assets/vendor/sweetalert2/dist/sweetalert2.min.js"></script>
    <!--Custom styles-->
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="~/css/loginStyle.css" rel="stylesheet" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body>
    <div class="container">
        <br />
        <br />
        <input type="hidden" value="@firstlogin" name="firstlogin" id="first" />
        <input type="hidden" value="@logout" name="logout" id="logout" />
        <div>
            @if (ViewBag.RegisterSuccess == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-thumbs-o-up"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    Account Created!! Please click on the link sent to your mail (@email) to confirm your email
                </div>
            }
            @if (ViewBag.EmailC == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-thumbs-o-up"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    Email confirmed!! Please login dont worry we saved your last activity
                </div>
            }
            @if (ViewBag.passreset == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-thumbs-o-up"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    Password reset successfully Please login
                </div>
            }
            @if (ViewBag.LoginAgain == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-thumbs-o-up"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    To change password, Please Login again.
                </div>
            }
            @if (ViewBag.SessionExpired == "Yes")
            {
                <div class="alert round bg-warning alert-icon-right alert-arrow-right alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-warning"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <strong>Warning!</strong> Session <a href="#" class="alert-link">Expired. Dont worry we saved your last activity</a>.
                </div>
            }
            @if (ViewBag.NotLoggedIn == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-heart"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <strong>Great Choice!</strong> but you need to be logged in to enroll for a course. Dont worry we saved your last activity
                </div>
            }
            @if (ViewBag.StudentNotFound == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-heart"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <strong>Sorry!</strong> No Student was found with email of the current logged in user with email  @ViewBag.currentUserEmail <a href="#" class="alert-link">Please Login again in with a valid student email</a>.
                </div>
            }
            @if (ViewBag.NotAuthenticated == "Yes")
            {
                <div class="alert round bg-primary alert-icon-left alert-arrow-left alert-dismissible mb-2" role="alert">
                    <span class="alert-icon"><i class="la la-heart"></i></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <strong>Sorry!</strong> Please login again. Dont worry your last activity was saved.
                </div>
            }
            <div id="show">
                <div class="spinner-grow text-primary" role="status">
                    <span class="sr-only" id="drg">Loading...</span>
                </div>
                <div class="spinner-grow text-secondary" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <div class="spinner-grow text-success" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <div class="spinner-grow text-danger" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <div class="spinner-grow text-warning" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <div class="spinner-grow text-info" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>


        </div>

        <div class="d-flex justify-content-center h-100">

            <div class="card">
                <div class="card-header">
                    <h3>Dual-Purpose</h3>
                    <div class="d-flex justify-content-end social_icon">
                        @foreach (var provider in Model.ExternalLogins)
                        {
                            @if (provider.Name == "Google")
                            {
                                <a asp-action="ExternalLogin" asp-controller="Account" asp-route-provider="@provider.Name"><span><i class="fab fa-google-plus-square"></i></span></a>


                            }
                            @if (provider.Name == "Facebook")
                            {

                                <a asp-action="ExternalLogin" asp-controller="Account" asp-route-provider="@provider.Name"><span><i class="fab fa-facebook-square"></i></span></a>



                            }


                        }

                    </div>

                </div>
                <div class="card-body">
                    <form method="post" asp-action="Login">
                        <div asp-validation-summary="All" class="text-white"></div>
                        <div class="input-group form-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                            </div>
                            <input asp-for="Email" class="form-control" placeholder="Email">
                            <span asp-validation-for="Email" class="text-blue"></span>
                        </div>
                        <div class="input-group form-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-key"></i></span>
                            </div>
                            <input asp-for="Password" class="form-control" placeholder="password">
                            <span asp-validation-for="Email" class="text-blue"></span>
                        </div>
                        <div class="row align-items-center remember">
                            <input type="checkbox" asp-for="RememberMe">Remember Me
                            <span asp-validation-for="Email" class="text-blue"></span>
                        </div>
                        <input type="hidden" asp-for="ReturnUrl" />
                        <div class="form-group">
                            <input type="submit" value="Login" class="btn float-right login_btn" id="reg">
                        </div>
                    </form>
                </div>
                <div class="card-footer">
                    <div class="d-flex justify-content-center links">
                        Don't have an account?<a href="#0">Sign in, we would create it for you</a>
                    </div>
                    <div class="d-flex justify-content-center">
                        <a asp-action="ForgotPassword" asp-controller="Account">Forgot your password?</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        window.setTimeout(function () {
            $(".alert").fadeTo(1000, 0).slideUp(1000, function () {
                $(this).remove();
            });
        }, 12000);
    </script>
    @if (ViewBag.FirstLogin == 1)
    {
        <script>
            swal("Welcome Mate!!!", "for your convenience this page handles both login into your dashboard and creating new account. just enter your email and password to log into your account, if it doesn't exist we would create an account for you. you only neeed to verify your email! Also  click on any of the social icons, to login or create an account as the case maybe ", "success");
        </script>
    }
    @if (ViewBag.logout == 1)
    {
        <script>
            swal("You Signed out!! ", " We hope you'd check back again.");
        </script>
    }
    <script>
        $(document).ready(function () {
            $('#show').hide();

            $('#reg').on("click", function (e) {

                $('#show').show();

            });
        });

       
    </script>
</body>
</html>